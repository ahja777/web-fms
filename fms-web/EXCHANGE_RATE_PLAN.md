# 환율조회 페이지 설계 계획

## 1. 개요

### 목표
- Logis 메뉴에 환율조회 페이지 추가
- 한국수출입은행 Open API를 활용한 실시간 환율 조회
- 하나은행 환율조회 화면 스타일 참고

### 기술 스택
- Next.js App Router
- 한국수출입은행 Open API (무료, 일 1000회 제한)
- API URL: `https://oapi.koreaexim.go.kr/site/program/financial/exchangeJSON`

---

## 2. 파일 구조

```
src/
├── app/
│   ├── api/
│   │   └── exchange-rate/
│   │       └── route.ts          # 환율 API 프록시
│   └── logis/
│       └── exchange-rate/
│           └── page.tsx          # 환율조회 페이지
└── components/
    └── Sidebar.tsx               # 메뉴 추가
```

---

## 3. API 설계

### 3.1 한국수출입은행 API 스펙

**Request:**
```
GET https://oapi.koreaexim.go.kr/site/program/financial/exchangeJSON
  ?authkey={인증키}
  &searchdate={조회일자 YYYYMMDD}
  &data=AP01
```

**Response:**
```json
[
  {
    "result": 1,
    "cur_unit": "USD",           // 통화코드
    "cur_nm": "미국 달러",        // 통화명
    "ttb": "1,430.50",           // 전신환(송금) 받으실때
    "tts": "1,459.50",           // 전신환(송금) 보내실때
    "deal_bas_r": "1,445.00",    // 매매기준율
    "bkpr": "1,445",             // 장부가격
    "yy_efee_r": "0.00",         // 년환가료율
    "ten_dd_efee_r": "0.00",     // 10일환가료율
    "kftc_deal_bas_r": "1,445.00", // 서울외국환중개 기준율
    "kftc_bkpr": "1,445"         // 서울외국환중개 장부가격
  }
]
```

### 3.2 내부 API 라우트

**Endpoint:** `/api/exchange-rate`

**Parameters:**
- `date`: 조회일자 (YYYYMMDD, 선택)

**Response:**
```typescript
interface ExchangeRateResponse {
  success: boolean;
  data: ExchangeRate[];
  searchDate: string;
  updateTime: string;
}

interface ExchangeRate {
  currencyCode: string;    // 통화코드 (USD, EUR, JPY 등)
  currencyName: string;    // 통화명
  ttb: number;             // 송금 받으실때
  tts: number;             // 송금 보내실때
  dealBasR: number;        // 매매기준율
  changeRate?: number;     // 전일대비 변동률
  changeAmount?: number;   // 전일대비 변동액
}
```

---

## 4. UI 설계

### 4.1 페이지 레이아웃

```
┌─────────────────────────────────────────────────────────────┐
│ Header: 환율조회                                              │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 조회 영역                                                 │ │
│ │ [조회일자: 2026-01-26] [오늘|어제|1주|1개월] [환율조회]    │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 요약 카드 (주요 4개 통화)                                  │ │
│ │ [USD 1,445.00] [EUR 1,520.00] [JPY 950.00] [CNY 198.00]  │ │
│ └─────────────────────────────────────────────────────────┘ │
├─────────────────────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────────────────────┐ │
│ │ 환율 테이블                                               │ │
│ │ ┌────────┬────────┬──────────┬──────────┬──────────┐   │ │
│ │ │ 통화   │ 통화명  │ 매매기준율 │ 송금보내실때│ 송금받으실때│   │ │
│ │ ├────────┼────────┼──────────┼──────────┼──────────┤   │ │
│ │ │ USD    │ 미국달러 │ 1,445.00 │ 1,459.50 │ 1,430.50 │   │ │
│ │ │ EUR    │ 유로    │ 1,520.00 │ 1,535.20 │ 1,504.80 │   │ │
│ │ │ JPY(100)│ 일본엔  │  950.00  │  959.50  │  940.50  │   │ │
│ │ │ CNY    │ 중국위안 │  198.00  │  200.00  │  196.00  │   │ │
│ │ │ ...    │ ...    │ ...      │ ...      │ ...      │   │ │
│ │ └────────┴────────┴──────────┴──────────┴──────────┘   │ │
│ └─────────────────────────────────────────────────────────┘ │
└─────────────────────────────────────────────────────────────┘
```

### 4.2 주요 통화 (우선 표시)

| 순위 | 통화코드 | 통화명 | 비고 |
|------|----------|--------|------|
| 1 | USD | 미국 달러 | 기축통화 |
| 2 | EUR | 유로 | EU 공통화폐 |
| 3 | JPY(100) | 일본 엔 | 100엔 기준 |
| 4 | CNY | 중국 위안 | |
| 5 | GBP | 영국 파운드 | |
| 6 | HKD | 홍콩 달러 | |
| 7 | SGD | 싱가포르 달러 | |
| 8 | AUD | 호주 달러 | |
| 9 | CAD | 캐나다 달러 | |
| 10 | THB | 태국 바트 | |

### 4.3 색상 및 스타일

- 상승: `text-red-500` (빨간색)
- 하락: `text-blue-500` (파란색)
- 보합: `text-gray-500` (회색)
- 주요통화 배경: `bg-amber-50/50`
- 테이블 헤더: `bg-[var(--surface-200)]`

---

## 5. 구현 단계

### Step 1: API 라우트 생성
- `/api/exchange-rate/route.ts` 생성
- 한국수출입은행 API 호출 및 데이터 변환
- 캐싱 적용 (5분)

### Step 2: 환율조회 페이지 생성
- `/logis/exchange-rate/page.tsx` 생성
- 검색 필터, 요약 카드, 환율 테이블 구현
- 반응형 디자인 적용

### Step 3: Sidebar 메뉴 추가
- 공통 카테고리에 '환율조회' 메뉴 추가
- href: `/logis/exchange-rate`

### Step 4: 테스트
- API 응답 확인
- UI 렌더링 테스트
- 빌드 테스트

---

## 6. 참고 자료

- [한국수출입은행 Open API](https://www.koreaexim.go.kr/ir/HPHKIR020M01?apino=2&viewtype=C)
- [공공데이터포털 환율 API](https://www.data.go.kr/data/3068846/openapi.do)
- [하나은행 환율조회](https://www.kebhana.com/cont/mall/mall15/mall1501/index.jsp)

---

## 7. 인증키 설정

환경변수에 한국수출입은행 API 인증키 추가 필요:

```env
KOREAEXIM_API_KEY=발급받은인증키
```

**인증키 발급 방법:**
1. https://www.koreaexim.go.kr 접속
2. Open API 메뉴 → 인증키 발급
3. 본인인증 후 발급

> **참고:** 인증키 없이도 데모 데이터로 테스트 가능하도록 구현

---

## 8. 승인 대기

위 설계안에 대한 승인 후 구현을 시작합니다.

- [ ] API 라우트 구조 승인
- [ ] UI 레이아웃 승인
- [ ] 메뉴 위치 승인 (공통 카테고리)
